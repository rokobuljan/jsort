import e from"https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/highlight.min.js";import t from"https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/languages/javascript.min.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();
/**
 * @class JSort
 * @author Roko C. Buljan <https://github.com/rokobuljan>
 * @license MIT
 * @description Small yet powerful drag and drop sortable library with touch support, smooth animations, for a great UX.
 * @see {@link https://github.com/rokobuljan/jsort}
 */
class s{static version="1.9.10";selectorItemsFull="";elGhost;elGrab;elTarget;elDrop;elDropParent;indexGrab=-1;indexDrop=-1;affectedElements=[];scrollParent=null;scrollDirection=null;scrollAnim=null;edgePressure=0;moveTimeout;isScrollPrevented=!1;hasPointerMoved=!1;hasTouchMoved=!1;pointerGrab=null;touchStart=null;constructor(e,t={}){this.elGrabParent=e,this.group="",this.swap=!1,this.duration=420,this.easing="cubic-bezier(0.6, 0, 0.6, 1)",this.scale=1.1,this.opacity=.8,this.grabTimeout=140,this.parentDrop=!0,this.moveThreshold=0,this.scrollThreshold=8,this.edgeThreshold=50,this.scrollSpeed=10,this.zIndex=2147483647,this.selectorParent=".jsort",this.selectorItems="*",this.selectorItemsIgnore=".jsort-ignore",this.selectorHandler=".jsort-handler",this.selectorIgnoreTarget="",this.selectorIgnoreFields=':is(input, select, textarea, button, label, [contenteditable=""], [contenteditable="true"], [tabindex]:not([tabindex^="-"]), a[href]:not(a[href=""]), area[href]):not(:disabled)',this.classGhost="is-jsort-ghost",this.classActive="is-jsort-active",this.classTouch="is-jsort-touch",this.classGrab="is-jsort-grab",this.classTarget="is-jsort-target",this.classAnimated="is-jsort-animated",this.classAnimatedDrop="is-jsort-animated-drop",this.classInvalid="is-jsort-invalid",this.onBeforeGrab=()=>{},this.onGrab=()=>{},this.onMove=()=>{},this.onBeforeDrop=()=>{},this.onDrop=()=>{},this.onAnimationEnd=()=>{},this.init(t)}getChildren(e){return[...e.children].filter(e=>e!==this.elGhost)}parseDataAttribute(e){return e?.dataset.jsort?.replace(/\s/g,"").replace(/;$/,"").split(/;/).reduce((e,t)=>{const[s,i]=t.split(":");return e[s]=isNaN(Number(i))?/^(true|false)$/.test(i)?JSON.parse(i):i:Number(i),e},{})??{}}isSignificantMove(e,t,s){const{clientX:i,clientY:r}=t,l=i-e.clientX,o=r-e.clientY;return Math.hypot(l,o)>=s}insertGhost(){if(!this.elGrab)return;const{x:e,y:t,width:s,height:i}=this.elGrab.getBoundingClientRect();this.elGhost=this.elGrab.cloneNode(!0),Object.assign(this.elGhost.style,{position:"fixed",left:`${e}px`,top:`${t}px`,width:`${s}px`,height:`${i}px`,pointerEvents:"none",zIndex:this.zIndex,opacity:this.opacity}),this.elGhost.classList.remove(this.classActive,this.classTarget),this.elGhost.classList.add(this.classGhost),this.elGhost.animate([{scale:this.scale}],{duration:250,easing:this.easing,fill:"forwards"}),this.elGrabParent.append(this.elGhost)}removeGhost(){this.elGhost&&(this.elGhost.remove(),this.elGhost=null)}animateItem({el:e,x:t,y:s}){const{left:i,top:r}=e.getBoundingClientRect();if(t===i&&s===r)return;e.classList.add(this.classAnimated);const l=e===this.elGrab?[{position:"relative",zIndex:1,translate:`${t-i}px ${s-r}px`,opacity:.9,scale:this.scale},{position:"relative",zIndex:1,translate:"0",opacity:1,scale:1}]:[{position:"relative",zIndex:0,scale:1,translate:`${t-i}px ${s-r}px`},{position:"relative",zIndex:0,scale:2-this.scale},{position:"relative",zIndex:0,scale:1,translate:"0"}],o=e.animate(l,{duration:this.duration,easing:this.easing,fill:"forwards"});return o.addEventListener("finish",()=>{e.classList.remove(this.classAnimated),o.cancel()}),o}closestElement(e,t){for(;e&&e!==t;)e=e.parentElement;return e===t?e:null}checkValidity({clientX:e=0,clientY:t=0,el:s}){const i=s??document.elementFromPoint(e,t),r=i?.closest(`${this.selectorItemsFull}, ${this.selectorParent}`),l=i?.closest(this.selectorParent),o=r===l,n=r&&this.closestElement(r,this.elGrab)===this.elGrab,h=l===this.elGrabParent,a=l?.dataset.jsortGroup,c=!h&&Boolean(a&&this.group===a);if(!this.parentDrop&&o)return!1;return!n&&r&&l&&c||h}engine(e,t=60){const s=1e3/t;let i=0,r=null;const l=()=>{r=requestAnimationFrame(l);const t=window.performance.now(),o=t-i;if(o<s)return;i=t-o%s,e()},o=()=>{cancelAnimationFrame(r),r=null,i=0};return{start:()=>{o(),i=performance.now(),r=requestAnimationFrame(l)},stop:o,tick:l}}findScrollParent(e){for(;e&&e!==document.documentElement;){const t=getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&/^(auto|scroll)$/.test(t.overflowY))return e;e=e.parentElement}return document.documentElement}scrollStep(){if(!this.scrollDirection||!this.scrollParent)return;const e=this.scrollSpeed*(this.edgePressure/Math.max(this.edgeThreshold,1));"up"===this.scrollDirection?this.scrollParent.scrollTop-=e:"down"===this.scrollDirection?this.scrollParent.scrollTop+=e:"left"===this.scrollDirection?this.scrollParent.scrollLeft-=e:"right"===this.scrollDirection&&(this.scrollParent.scrollLeft+=e)}startEdgeScroll(e){this.scrollDirection!==e&&(this.scrollDirection=e,this.scrollAnim||(this.scrollAnim=this.engine(this.scrollStep.bind(this)),this.scrollAnim?.start()))}stopEdgeScroll(){this.scrollDirection=null,this.scrollAnim&&(this.scrollAnim.stop(),this.scrollAnim=null)}handleScrollParent(e){this.scrollParent||(this.scrollParent=this.findScrollParent(this.elGrab));const t=this.scrollParent.getBoundingClientRect(),s=document.documentElement,i=this.scrollParent===s,r=i?0:t.top,l=i?window.innerHeight:t.bottom,o=i?0:t.left,n=i?window.innerWidth:t.left;e.clientY<r+this.edgeThreshold?(this.edgePressure=Math.min(this.edgeThreshold,this.edgeThreshold-(e.clientY-r)),this.startEdgeScroll("up")):e.clientY>l-this.edgeThreshold?(this.edgePressure=Math.min(this.edgeThreshold,this.edgeThreshold-(l-e.clientY)),this.startEdgeScroll("down")):e.clientX<o+this.edgeThreshold?(this.edgePressure=Math.min(this.edgeThreshold,this.edgeThreshold-(e.clientX-o)),this.startEdgeScroll("left")):e.clientX>n-this.edgeThreshold?(this.edgePressure=Math.min(this.edgeThreshold,this.edgeThreshold-(n-e.clientX)),this.startEdgeScroll("right")):this.stopEdgeScroll()}insert(e,t){const s=e.closest(this.selectorParent),i=s?[...s.children]:[];this.indexGrab=i.indexOf(e);const r=i.filter(t=>t!==e&&!t.matches(`.${this.classGhost}`));this.elDrop=t?.closest(`${this.selectorItemsFull}, ${this.selectorParent}`);const l=this.elDrop?.matches(this.selectorParent);this.elDropParent=this.elDrop?.closest(this.selectorParent);const o=this.elDropParent?[...this.elDropParent.children]:[],n=s===this.elDropParent;this.indexDrop=l?Math.max(0,n?r.length:o.length):o.indexOf(this.elDrop),this.elGhost?.animate([{scale:1}],{duration:0,fill:"forwards"});const h=this.elGhost?.getBoundingClientRect();if(this.affectedElements=[],this.swap)this.affectedElements=this.elDrop?[this.elDrop]:[];else if(n){const e=l?this.indexGrab:Math.min(this.indexDrop,this.indexGrab),t=l?r.length-1:Math.max(this.indexDrop,this.indexGrab);this.affectedElements=r.slice(e,t+1)}else this.affectedElements=[...r.slice(this.indexGrab),...o.slice(this.indexDrop)];const a=this.affectedElements.map(e=>{const{x:t,y:s}=e.getBoundingClientRect();return{el:e,x:t,y:s}}),c=this.checkValidity({el:t}),d=this.onBeforeDrop?.call(this,{elGrab:this.elGrab,elGrabParent:s,elGhost:this.elGhost,elDrop:this.elDrop,elDropParent:this.elDropParent,indexGrab:this.indexGrab,indexDrop:this.indexDrop,isValidTarget:c,isSameParent:n,event:this._currentEvent})??!0,u=Boolean(this.elDrop)&&c&&d;if(u){if(this.swap&&!l){const t=e.nextSibling;this.elDropParent?.insertBefore(e,this.elDrop.nextSibling),s?.insertBefore(this.elDrop,t)}else l?this.elDropParent?.append(e):n?this.elDropParent?.insertBefore(e,this.indexDrop<this.indexGrab?this.elDrop:this.elDrop.nextSibling):this.elDropParent?.insertBefore(e,this.elDrop);a.forEach(t=>{t.el!==e&&this.animateItem(t)})}if(h){e.classList.add(`${this.classAnimatedDrop}`);const t=this.animateItem({el:e,x:h.left,y:h.top});t?t.addEventListener("finish",()=>{e.classList.remove(`${this.classAnimatedDrop}`),this.onAnimationEnd?.call(this)}):e.classList.remove(`${this.classAnimatedDrop}`)}return this.removeGhost(),u}grab=e=>{if(this.elGrab)return;const t=e.target,s=t.closest(`${this.selectorItemsFull}`);if(Boolean(t!==s&&(this.selectorIgnoreTarget&&t.closest(this.selectorIgnoreTarget)||this.selectorIgnoreFields&&t.closest(this.selectorIgnoreFields)))||!s||s.parentElement!==this.elGrabParent)return;const i=s.querySelector(this.selectorHandler),r=i?.checkVisibility(),l=Boolean(i),o=t?.closest(this.selectorHandler);if(l&&r&&!o)return;const{clientX:n,clientY:h}=e;this.pointerGrab={clientX:n,clientY:h},this.elGrab=s,this.indexGrab=[...this.elGrabParent.children].indexOf(this.elGrab);this.onBeforeGrab?.call(this,{elGrab:this.elGrab,elGrabParent:this.elGrabParent,indexGrab:this.indexGrab,event:e})??!0?(e.preventDefault(),this.elGrab.classList.add(this.classActive),this.elGrab.style.cursor="move",this.elGrab.style.userSelect="none","mouse"===e.pointerType&&(this.isScrollPrevented=!0),this.onGrab?.call(this,{elGrab:this.elGrab,elGrabParent:this.elGrabParent,indexGrab:this.indexGrab,event:e})):this.reset()};move=e=>{if(!this.elGrab||!this.isScrollPrevented||this.hasPointerMoved&&!this.elGrab?.hasPointerCapture(e.pointerId))return;const t=this.isSignificantMove(this.pointerGrab,e,this.moveThreshold);!this.hasPointerMoved&&t&&(this.hasPointerMoved=!0,this.elGrab.setPointerCapture(e.pointerId),this.elGrab.classList.add(this.classGrab),this.insertGhost());const{clientX:s,clientY:i}=e,r=this.checkValidity({clientX:s,clientY:i});this.elGhost&&this.pointerGrab&&(this.elGhost.style.translate=`${s-this.pointerGrab.clientX}px ${i-this.pointerGrab.clientY}px`,this.elGhost.classList.toggle(this.classInvalid,!r)),this.elGrab.style.cursor=r?"grab":"not-allowed";const l=document.elementFromPoint(s,i),o=l?.closest(`${this.selectorItemsFull}, ${this.selectorParent}`);o!==this.elTarget&&(this.elTarget?.classList.remove(this.classTarget),r&&(this.elTarget=o,this.elTarget?.classList.add(this.classTarget))),this.handleScrollParent(e),this.onMove?.call(this,{elGrab:this.elGrab,elGrabParent:this.elGrabParent,elGhost:this.elGhost,elTarget:this.elTarget,isValidTarget:r,event:e})};drop=e=>{if(this.stopEdgeScroll(),this.isScrollPrevented=!1,this.elGrab){if(this.elGrab.style.removeProperty("user-select"),this.elGrab.style.removeProperty("cursor"),this.elGrab.classList.remove(this.classActive,this.classGrab,this.classTouch),this.elTarget?.classList.remove(this.classTarget),this.elGrab?.hasPointerCapture(e.pointerId)){const{clientX:t,clientY:s}=e,i=document.elementFromPoint(t,s);this._currentEvent=e;this.insert(this.elGrab,i)&&this.onDrop?.call(this,{elGrab:this.elGrab,elGrabParent:this.elGrabParent,elDrop:this.elDrop,elDropParent:this.elDropParent,indexGrab:this.indexGrab,indexDrop:this.indexDrop,event:e})}this.reset(),this.removeGhost()}};handleTouchStart=e=>{if(!this.elGrab||this.touchStart)return;const{clientX:t,clientY:s}=e.touches[0];this.touchStart={clientX:t,clientY:s},this.moveTimeout&&clearTimeout(this.moveTimeout),this.moveTimeout=setTimeout(()=>{this.hasTouchMoved||(this.elGrab?.classList.add(`${this.classTouch}`),this.isScrollPrevented=!0)},this.grabTimeout)};handleTouchMove=e=>{if(!this.elGrab||!this.touchStart)return;if(this.isScrollPrevented)return void e.preventDefault();const t=this.isSignificantMove(this.touchStart,e.touches[0],this.scrollThreshold);!this.hasTouchMoved&&t&&(this.hasTouchMoved=!0,clearTimeout(this.moveTimeout),this.moveTimeout=void 0)};sort(e){const t=this.getChildren(this.elGrabParent),s=t.map(e=>{const{x:t,y:s}=e.getBoundingClientRect();return{el:e,x:t,y:s}}),i=[...t].sort(e);return this.elGrabParent.append(...i),s.forEach(e=>this.animateItem(e)),i}reset(){this.elGhost=null,this.elGrab=null,this.elTarget=null,this.elDrop=null,this.elDropParent=null,this.indexGrab=-1,this.indexDrop=-1,this.affectedElements=[],this.scrollParent=null,this.scrollDirection=null,this.scrollAnim=null,this.edgePressure=0,this.moveTimeout=void 0,this.isScrollPrevented=!1,this.pointerGrab=null,this.touchStart=null,this.hasPointerMoved=!1,this.hasTouchMoved=!1}init(e){this.destroy();const t=this.parseDataAttribute(this.elGrabParent);Object.assign(this,e,t),this.reset(),this.selectorItems=(this.selectorItems??"*").replace(/^(?! *>)/,"> $&"),this.selectorItemsFull=`${this.selectorParent}${this.selectorItems}${this.selectorItemsIgnore?`:not(${this.selectorItemsIgnore})`:""}`,this.elGrabParent&&(this.elGrabParent.addEventListener("touchstart",this.handleTouchStart),this.elGrabParent.addEventListener("touchmove",this.handleTouchMove),this.elGrabParent.addEventListener("pointerdown",this.grab),this.elGrabParent.addEventListener("pointermove",this.move),this.elGrabParent.addEventListener("pointerup",this.drop),this.elGrabParent.addEventListener("pointercancel",this.drop),""!==this.group&&(this.elGrabParent.dataset.jsortGroup=this.group))}destroy(){this.removeGhost(),this.elGrabParent&&(this.elGrabParent.removeEventListener("touchstart",this.handleTouchStart),this.elGrabParent.removeEventListener("touchmove",this.handleTouchMove),this.elGrabParent.removeEventListener("pointerdown",this.grab),this.elGrabParent.removeEventListener("pointermove",this.move),this.elGrabParent.removeEventListener("pointerup",this.drop),this.elGrabParent.removeEventListener("pointercancel",this.drop),""!==this.group&&delete this.elGrabParent.dataset.jsortGroup)}}e.registerLanguage("javascript",t);const i=(e,t=document)=>t.querySelector(e),r=(e,t=document)=>t.querySelectorAll(e);i("#version").textContent=`${s.version}`,console.log(`Running JSort version: ${s.version}`),r('.jsort:not([id^="example-"])').forEach(e=>{new s(e,{selectorItems:"*:not(.ignore)",onDrop(e){console.log(e)}})});const l=i("#example-sort-select"),o=i("#example-sort"),n=new s(o);r("li",o).forEach((e,t)=>e.dataset.index=t),l.addEventListener("input",()=>{const e="dec"===l.value,t=""===l.value?"index":"name";n.sort((s,i)=>(e&&([s,i]=[i,s]),s.dataset[t].localeCompare(i.dataset[t],"en",{numeric:!0})))}),r("pre > code").forEach(t=>{e.highlightElement(t)}),r(".grid > *, .list > *").forEach(e=>{e.style.backgroundColor=`hsl(${~~(200*Math.random()+80)} 56% 65%)`});
